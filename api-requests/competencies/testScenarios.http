### Test Scenarios for Competencies API

### 1. Create new competency
POST http://localhost:8080/api/competencies
Content-Type: application/json

{
  "name": "Leadership Skills",
  "description": "Ability to guide and motivate teams"
}

> {%
client.test("Request executed successfully", function() {
    client.assert(response.status === 201 || response.status === 200, "Response status is not 201 or 200");
});
client.test("Response has correct competency data", function() {
    client.assert(response.body.name === "Leadership Skills", "Name does not match");
    client.assert(response.body.description === "Ability to guide and motivate teams", "Description does not match");
    client.assert(response.body.id !== null, "ID should not be null");
});
%}

### Store competency id for further tests
{% if (response.body.id) { %}
{% client.global.set("competencyId", response.body.id); %}
{% } %}

### 2. Get created competency
GET http://localhost:8080/api/competencies/{{competencyId}}
Accept: application/json

> {%
client.test("Request executed successfully", function() {
    client.assert(response.status === 200, "Response status is not 200");
});
client.test("Response has correct competency data", function() {
    client.assert(response.body.name === "Leadership Skills", "Name does not match");
    client.assert(response.body.description === "Ability to guide and motivate teams", "Description does not match");
    client.assert(response.body.id === client.global.get("competencyId"), "ID does not match");
});
%}

### 3. List all competencies
GET http://localhost:8080/api/competencies
Accept: application/json

> {%
client.test("Request executed successfully", function() {
    client.assert(response.status === 200, "Response status is not 200");
});
client.test("Response is array", function() {
    client.assert(Array.isArray(response.body), "Response body is not an array");
    client.assert(response.body.length > 0, "Array is empty");
});
%}

### 4. Update competency
PUT http://localhost:8080/api/competencies/{{competencyId}}
Content-Type: application/json

{
  "name": "Updated Leadership Skills",
  "description": "Updated ability to guide and motivate teams effectively"
}

> {%
client.test("Request executed successfully", function() {
    client.assert(response.status === 200, "Response status is not 200");
});
client.test("Response has updated competency data", function() {
    client.assert(response.body.name === "Updated Leadership Skills", "Name not updated");
    client.assert(response.body.description === "Updated ability to guide and motivate teams effectively", "Description not updated");
    client.assert(response.body.id === client.global.get("competencyId"), "ID changed after update");
});
%}

### 5. Delete competency
DELETE http://localhost:8080/api/competencies/{{competencyId}}

> {%
client.test("Request executed successfully", function() {
    client.assert(response.status === 204 || response.status === 200, "Response status is not 204 or 200");
});
%}

### 6. Verify deletion
GET http://localhost:8080/api/competencies/{{competencyId}}
Accept: application/json

> {%
client.test("Request should return not found", function() {
    client.assert(response.status === 404, "Response status is not 404");
});
%}
